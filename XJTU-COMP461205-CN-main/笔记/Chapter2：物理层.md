# CHAPTER 2：物理层

物理层定义了比特在信道上发送时的电气/时序接口

# 1. 通信基础

>## 1.1. 基础概念
>
>> ### 1.1. 信号
>>
>> > ==:one:信号与数据==
>> >
>> > 1. 信号：数据的电气/电磁表现
>> > 2. 数据：传送信号的实体
>> > 3. 数字调制：信号$\xleftrightarrow{转化}$数据
>> >
>> > :two:模拟&数字信号：对应左右，分别为连续的/离散的
>> >
>> > <img src="https://raw.githubusercontent.com/DANNHIROAKI/PicGo-Typora-GitHub-Picture-bed/main/img/image-20231002144109869.png" alt="image-20231002144109869" style="zoom:50%;" /> 
>> >
>> > :three:基带&宽带信号
>> >
>> > | 类型     | 数据表示                                  | 传输的信道 | 传输方式 |
>> > | -------- | ----------------------------------------- | ---------- | -------- |
>> > | 基带信号 | 转化成数字信号，用电压高低表示数据中的0/1 | 数字信道   | 基带传输 |
>> > | 宽带信号 | 转化成模拟信号                            | 模拟信道   | 宽带传输 |
>>
>> ### ==1.1.2. 信源/信道/信宿==
>>
>> >| 组件 | 描述                                            |
>> >| ---- | ----------------------------------------------- |
>> >| 信源 | 信息的源泉，产生和发送信息的设备                |
>> >| 信道 | 信号的传输媒质，分为有线(双绞线)/无线(人造卫星) |
>> >| 信宿 | 信息的归宿地，接收和处理信息的设备              |
>
>## 1.2. 其他概念
>
>> ### 1.2.1. 带宽
>>
>> > :one:模拟信号带宽(Hz)：允许通过信号的，最高频率减最低频率
>> >
>> > :two:数字信号带宽(bit/s)：通道传数据的能力
>>
>> ### 1.2.2. 噪声
>>
>> > :one:噪声：干扰有效信号传输的其他信号
>> >
>> > :two:信噪比：
>> >
>> > 1. 噪声对信号的影响是相对的
>> > 2. 信噪比：信号的平均功率/噪声平均功率$SN=\cfrac{S}{N}$，取对数$SNR=10lg(\cfrac{S}{N})(dB)$
>
>## 1.3. 通讯/传输方式
>
>>:one:数据传输方式
>>
>>1. 串行传输：一个一个比特按照时间顺序传输，常用于远距传输
>>2. 并行传输：多比特通过多信道同时传输，常用于近距传输
>>
>>:two:通信方式
>>
>>1. 同步通信：接收/发送端时钟频率相等，使接收端对收到比特流采样，从而判决时间是准确的
>>2. 异步通信：更便宜
>>   - 传输单位：字节，但是字节的前/后可各塞一位
>>   - 特点：发送端发完一字节后，下一字节什么时候发不知道
>>
>>:three:通信模式
>>
>>1. 单工：只能$A\rightarrow{}B$，如广播电视
>>2. 半双工：可以$A\rightarrow{}B$和$A\leftarrow{}B$，如对讲机
>>3. 全双工：可以$A\xleftrightarrow{同时}B$，如电话
>
>## 1.4. 信息传输速率
>
>> https://s2.loli.net/2023/12/31/6LiCAakwUfF7eZT.png
>>
>> :one:速率概念的核心：单位时间内传输的数据量
>>
>> :two:码元：一个码元就是一个脉冲信号，一个脉冲可携带一个/多个比特的数据
>>
>> :three:两种速率
>>
>> 1. 比特率：一秒能传输多少个比特
>> 2. 波特率：一秒能传输多少个码元(脉冲)，单个码元含有n比特时，比特率=n*波特率

# 2. Nyquist定理&Shannon定理

> ## 2.1. 采样定理&码间干扰
>
> > :one:原始信号最大频率为$f_{max}$，则将模拟信号转为数字信号时，须有$f_{采样}>2f_{max}$信息才不会丢失
> >
> > :two:码间串扰：带宽存在→高频分量过不去→接收端信号由此失去了码元见的清晰界限
> >
> > :three:Nyquist定理由来：不出现码间串扰时，最大的码元传输速率$C_{max}$
>
> ## 2.2. Nyquist定理
>
> > :one:定理内容：无噪声情况下，基于码元最大速率的最大速率==$C_{max}=f_{采样}\log_{2}N=2f\log_{2}N(bit/s)$==
> >
> > 1. $f$表示低通信号带宽，$2f$是码元最大传输速率
> > 2. $N$表示码元的离散电平的数目，一码元表示$n$比特时，$N=2^n$
> > 3. $2f\to{}2f\log_{2}N$后，才表示比特的最大传输速率，事实上$N$可以无穷大
> >
> > :two:低通信道
> >
> > 1. 低通信道：带宽从0开始，超过带宽范围的信号，无法不失真通过
> > 2. 带通信道：带宽从非0开始
> >
> > :three:举例
> >
> > 1. 低通信道截止频率是2kHz→最高码元传输速率是4kHz
> > 2. 带通信道频率范围是3kHz-4kHz→有效带宽1kHz→最高码元传输速率是1kHz
>
> ## 2.3. Shannon定理
>
> > :one:有噪声情况下，最大数据传输速率==$C_{Max}=W·\log_{2}(1+\cfrac{S}{N})$==
> >
> > :two:$W$是信道带宽单位是$\text{Hz}$，$\log_{2}(1+\cfrac{S}{N})$为信道比
>
> ## 2.4. 两个定理的比较
>
> > :one:Nyquist定理：
> >
> > 1. 说明码元传输速率有限，强行拔高会导致码元见干扰，接收端看不出0/1
> > 2. 没说明信息传送速率的极限，采用一定的编码(一码元含多比特)，可以使信息传送速率无穷大
> > 3. 这是理想情况下的，实际速率要小得多
> >
> > :two:Shannon定理：
> >
> > 1. 给出的是信息传送速率的极限，当然也给出了提高速率的唯二方法
> > 2. 在给定极限内，一定能找到一种无差错传输方法
> > 3. Nyquist定理中，即使有可以使速率无穷大的编码，也不能超过Shannon定理的极限，因为信噪比

# 3. 编码与调制

>:one:含义
>
>1. 调制：转化成模拟信号
>2. 编码：转化为数字信号
>
>:two:数据→信号的四种方式   
>
><img src="https://s2.loli.net/2024/01/01/pHgUfdbCYcDAqRJ.png" alt="image-20231231224828153" style="zoom: 67%;" /> 
>
>==:three:数字数据→数字信号，常见的编码方式==
>
><img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240101005921668.png" alt="image-20240101005921668" style="zoom:67%;" /> 
>
>1. 不归零：正电平$\xrightarrow{代表}$1，负电平$\xrightarrow{代表}$0(反之也行)
>2. 归零制：正脉冲$\xrightarrow{代表}$1，负脉冲$\xrightarrow{代表}$0(反之也行)
>3. Manchester：左半边正电平$\xrightarrow{代表}$1，左半边负电平$\xrightarrow{代表}$0(反之也行)，但是右半边必须翻转一下
>4. 差分Manchester：如果当前比特=0则跳转一次，比特=1则维持以前电平，然后中间还是跳转一次

# 4. 数据传输方式

> <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240101010830460.png" alt="image-20240101010830460" style="zoom: 50%;" /> 
>
> ## 4.1. 电路交换：数据量大时适用
>
> > :one:含义：通信前在双方间建立一条被==双方独占==的物理通路
> >
> > :two:优点：延时小/实时强/传输有序/适用广(数据/模拟信号都适用)/控制简单/避免冲突
> >
> > :three:缺点：建立连接耗时长/霸着连线效率低/无统一标准/灵活性差(断开就要重新拨号)
>
> ## 4.2. 报文交换
>
> > :one:报文：报文交换的传输单位，携带有源地址/目标地址信息
> >
> > :two:报文交换：让报文在交换结点不断存储转发
> >
> > :three:优点：无连接/动态分配路线/可靠/效率高/多目标(一个报文多个目标地址)
> >
> > :four:缺点：延时大，结点需要缓存
>
> ## 4.3. 分组交换(当今主流)
>
> > :one:分组：就是报文分割，每个分组包含原地址&目标地址
> >
> > :two:分组交换：$报文\xrightarrow{分组}n个分组\xrightarrow{套上首部(源/目的地址)}\xrightarrow{传输}\xrightarrow{摘下首部}n个乱序分组\xrightarrow{排序}接收到报文$
> >
> > :three:优点
> >
> > 1. 加速传输：一个报文的不同分组可并行发送
> > 2. 存储管理更简单：不用缓存整个报文，只用缓存一部分分组
> > 3. 出错率小：重传的也更小了
> >
> > :four:缺点：有延时，可能丢失/失序/重复，接收端还需重排

# 5. 两种分组交换：数据报&虚电路

> ## 5.1. 数据报(无连接)
>
> > <img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240101020039060.png" alt="image-20240101020039060" style="zoom: 60%;" /> 
> >
> > :one:过程：分割报文为分组→主机1缓存→主机1按照转发表转发→重复缓存转发→接收端收到信息
> >
> > :two:统计复用：多用户并行传输，在此处体现为例如A发送时，B也可以发送
> >
> > :three:特点
> >
> > 1. 尽最大努力交付：不靠性，可能会送丢，送达的是乱序的
> > 2. 降低了延时：分组可并行传输
> > 3. 能有效应对故障：一条路线崩了，交换机换一个交换表就行了
> > 4. 资源利用高：收发方谁都不独占一条路线
>
> ## 5.2. 虚电路(面向连接)
>
> >:one:含义：发数据前，在收发两端建立一条虚连接，通讯完后释放
> >
> >:two:过程：A→B
> >
> ><img src="https://raw.githubusercontent.com/DANNHIROAKI/PicGo-Typora-GitHub-Picture-bed/main/img/image-20231002211558898.png" alt="image-20231002211558898" style="zoom:50%;" /> 
> >
> >1.  A发出**呼叫请求**特殊分组，分组转发给B
> >2.  B回送**呼叫应答**ACK表示同意建立虚电路，虚电路就建立好了
> >3.  A向B发送分组，B按照顺序接收
> >4.  传送完后，释放连接
> >
> >:three:特点
> >
> >1.  延时低
> >2.  首部并不包含目的地址，但包含虚电路标识符，相对数据报方式开销小
> >3.  虚拟电路上某个线路/交换机故障会导致传输崩溃

# 6. 传输介质

>## 6.1. 介质分类
>
>>### 6.1.1. 导向型介质：实实在在的线
>>
>>>:one:双绞线：两根互相绝缘的铜导线绞合起来，==贵，效果还差==
>>>
>>><img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240101022433720.png" alt="image-20240101022433720" style="zoom: 67%;" /> 
>>>
>>>:two:同轴电缆：抗干扰更强
>>>
>>> <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240101022514182.png" alt="image-20240101022514182" style="zoom:50%;" />  
>>>
>>>==:three:光纤：分为单模(上图，只能直线传播)，多模(下图，可反射)，缺点是太娇贵了==
>>>
>>><img src="https://raw.githubusercontent.com/DANNHIROAKI/PicGo-Typora-GitHub-Picture-bed/main/img/image-20231002214315770.png" alt="image-20231002214315770" style="zoom:67%;" /> 
>>>
>>><img src="https://raw.githubusercontent.com/DANNHIROAKI/PicGo-Typora-GitHub-Picture-bed/main/img/image-20231002214531069.png" alt="image-20231002214531069" style="zoom: 67%;" /> 
>>>
>>>==:four:电线：这是一个雷人的想法，缺点在于==
>>>
>>><img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240101024028279.png" alt="image-20240101024028279" style="zoom: 67%;" /> 
>>>
>>>1. 高速传输还需更高频率
>>>2. 电器开关的噪声大
>>>3. 电线和网线电气特性不一致
>>
>>### 6.1.2. 非导向型介质：在自由空间中自由传播
>>
>>> 短波(通讯)，微波(通讯)，红外线，可见光，激光(通讯)
>
>## 6.2. 物理层接口特性
>
>>:one:介质是第0层：物理层规定介质如何传输比特流，确定介质接口特性
>>
>><img src="https://raw.githubusercontent.com/DANNHIROAKI/PicGo-Typora-GitHub-Picture-bed/main/img/image-20231002215408405.png" alt="image-20231002215408405" style="zoom: 25%;" /> 
>>
>>:two:接口特性
>>
>>1. **机械特性**：接口形状/尺寸/引线数目/排列
>>
>>2. **电气特性**：电压范围，何种信号表示0/1
>>
>>3. **功能特性**：接口部件的信号线(数据/控制/定时线等)的用途
>>
>>4. **规程特性(过程特性)**：物理线路上对不同功能的各种可能事件的出现顺序(时序关系)

# 7. 物理层设备：中继器+集线器

>### 2.3.1. 中继器
>
>>:one:信号传输过长→信号衰减→加个中继器→衰减到不完整的信号重新完整
>>
>>:two:放大器放大模拟信号，中继器放大数字信号
>
>### 2.3.1. 集线器：多端口中继器
>
>>:one:A发信给B过程：A将信息送到集线器→集线器将信息放大后广播→收到广播后B匹配成功→B接收
>>
>>:two:通过中继器或集线器连接起来的几个网段，仍然是一个局域网
