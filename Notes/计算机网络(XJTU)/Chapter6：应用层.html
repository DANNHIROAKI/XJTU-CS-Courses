<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<link href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color: #ffffff; --text-color: #333333; --select-text-bg-color: #B5D6FC; --select-text-font-color: auto; --monospace: "Lucida Console",Consolas,"Courier",monospace; --title-bar-height: 20px; }
.mac-os-11 { --title-bar-height: 28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
h1, h2, h3, h4, h5 { white-space: pre-wrap; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
thead, tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
svg { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; border-color: transparent !important; padding-top: 0px !important; padding-bottom: 0px !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  #write > p:nth-child(1) { margin-top: 0px; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
  figure { overflow-x: visible; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.reversefootnote { font-family: ui-monospace, sans-serif; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex: 2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; overflow-wrap: anywhere; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.42857rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left: 28px solid transparent; border-right: 28px solid transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right: 8px solid transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }
mjx-container { break-inside: avoid; }
.md-alert.md-alert-note { border-left-color: rgb(9, 105, 218); }
.md-alert.md-alert-important { border-left-color: rgb(130, 80, 223); }
.md-alert.md-alert-warning { border-left-color: rgb(154, 103, 0); }
.md-alert.md-alert-tip { border-left-color: rgb(31, 136, 61); }
.md-alert.md-alert-caution { border-left-color: rgb(207, 34, 46); }
.md-alert { padding: 0px 1em; margin-bottom: 16px; color: inherit; border-left: 0.25em solid rgb(0, 0, 0); }
.md-alert-text-note { color: rgb(9, 105, 218); }
.md-alert-text-important { color: rgb(130, 80, 223); }
.md-alert-text-warning { color: rgb(154, 103, 0); }
.md-alert-text-tip { color: rgb(31, 136, 61); }
.md-alert-text-caution { color: rgb(207, 34, 46); }
.md-alert-text { font-size: 0.9rem; font-weight: 700; }
.md-alert-text svg { fill: currentcolor; position: relative; top: 0.125em; margin-right: 1ch; overflow: visible; }
.md-alert-text-container::after { content: attr(data-text); text-transform: capitalize; pointer-events: none; margin-right: 1ch; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/* open-sans-regular - latin-ext_latin */
  /* open-sans-italic - latin-ext_latin */
    /* open-sans-700 - latin-ext_latin */
    /* open-sans-700italic - latin-ext_latin */
  html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
}

body {
    font-family: "Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, 'Segoe UI Emoji', sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}

/*@media print {
    .typora-export h1,
    .typora-export h2 {
        border-bottom: none;
        padding-bottom: initial;
    }

    .typora-export h1::after,
    .typora-export h2::after {
        content: "";
        display: block;
        height: 100px;
        margin-top: -96px;
        border-top: 1px solid #eee;
    }
}*/

h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table th:first-child,
table td:first-child {
    margin-top: 0;
}
table th:last-child,
table td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    pre {
        page-break-inside: avoid;
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.mac-os #write{
    caret-color: AccentColor;
}

.md-lang {
    color: #b4654d;
}

/*.html-for-mac {
    --item-hover-bg-color: #E6F0FE;
}*/

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
    opacity: 0.4;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}

.menu-item-container a.menu-style-btn {
    background-color: #f5f8fa;
    background-image: linear-gradient( 180deg , hsla(0, 0%, 100%, 0.8), hsla(0, 0%, 100%, 0)); 
}



mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
  min-height: 1px;
  min-width: 1px;
}

mjx-container[jax="SVG"] > svg a {
  fill: blue;
  stroke: blue;
}

mjx-assistive-mml {
  position: absolute !important;
  top: 0px;
  left: 0px;
  clip: rect(1px, 1px, 1px, 1px);
  padding: 1px 0px 0px 0px !important;
  border: 0px !important;
  display: block !important;
  width: auto !important;
  overflow: hidden !important;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

mjx-assistive-mml[display="block"] {
  width: 100% !important;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][display="true"][width="full"] {
  display: flex;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line], svg[data-table] > g > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame], svg[data-table] > g > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed, svg[data-table] > g > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted, svg[data-table] > g > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > g > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

mjx-container[jax="SVG2"] path[data-c], mjx-container[jax="SVG2"] use[data-c] {
  stroke-width: 3;
}

g[data-mml-node="xypic"] path {
  stroke-width: inherit;
}

.MathJax g[data-mml-node="xypic"] path {
  stroke-width: inherit;
}
mjx-container[jax="SVG"] path[data-c], mjx-container[jax="SVG"] use[data-c] {
							stroke-width: 0;
						}
</style><title>Chapter6：应用层</title>
</head>
<body class='typora-export os-windows'><div class='typora-export-content'>
<div id='write'  class=''><h1 id='应用层'><span>应用层</span></h1><p><strong><span>1️⃣</span></strong><span>协议模式：传输层服务模式，C-S模式，P2P模式</span></p><p><strong><span>2️⃣</span></strong><span>协议：HTTP，FTP，SMTP/pop3/imap，DNS</span></p><p><strong><span>3️⃣</span></strong><span>网络编程：套接字socketAPI</span></p><h1 id='1-应用层协议原理'><span>1. 应用层协议原理</span></h1><blockquote><p><span>将app限制在端系统，研发网络应用的核心在于能在不同端系统运行+通信</span></p><h2 id='11-网络app体系结构'><span>1.1. 网络APP体系结构</span></h2><blockquote><p><strong><span>1️⃣</span></strong><span>C-S结构：比如Web/FTP/电子邮件</span></p><ol start='' ><li><p><span>服务器：不间断的主机，有永久IP</span></p></li><li><p><span>客户端：与服务器(间歇)通信，有动态IP</span></p></li></ol><p><strong><span>2️⃣</span></strong><span>P2P结构：适用于流量密集的APP，高可扩展但难管理</span></p><ol start='' ><li><p><span>服务器：妹有</span></p></li><li><p><span>端系统：实质上又当C又当S，互相直连通信，间歇式连接，IP变化</span></p></li></ol><p><strong><span>3️⃣</span></strong><span>混合体系结构</span></p><ol start='' ><li><p><span>Skype：一方面是基于IP的P2P应用，但是查找远程方地址时又用C-S</span></p></li><li><p><span>Telegram：两用户聊天是P2P，但集中式服务基于C-S(用户上线请求注册IP，查找好友IP)</span></p></li></ol></blockquote><h2 id='12-进程通信'><span>1.2. 进程通信</span></h2><blockquote><p><strong><span>1️⃣</span></strong><span>两种进程通信：同一主机中的两进程(通过OS内核完成)，不同主机间进程(通过消息交换完成)</span></p><p><strong><span>2️⃣</span></strong><span>两种进程：客户端进程(发起通信)，服务器进程(等待被联系)</span></p><p><strong><span>3️⃣</span></strong><span>socket套接字：aka网络和APP间的API，一种软件接口，连接进程和网络(即应用层与传输层)</span></p><p><img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20231216193453049.png" alt="image-20231216193453049" style="zoom:50%;" /><span> </span></p><p><strong><span>4️⃣</span></strong><span>进程寻址：</span></p><ol start='' ><li><p><span>即进程的标识，格式为IP(标识主机)+端口号(标识进程)</span></p></li><li><p><span>端口：例如HTTP服务端口为80，邮件服务端口为25</span></p></li></ol></blockquote><h2 id='13-应用层协议概述'><span>1.3. 应用层协议概述</span></h2><blockquote><p><strong><span>1️⃣</span></strong><span>应用层协议定义了什么</span></p><ol start='' ><li><p><span>交换报文的类型：例如请求/响应</span></p></li><li><p><span>消息语法：消息中有什么字段&amp;字段如何描述</span></p></li><li><p><span>字段语法：字段中消息的含义</span></p></li><li><p><span>规则：进程何时/如何响应报文</span></p></li></ol><p><strong><span>2️⃣</span></strong><span>种类：</span></p><ol start='' ><li><p><span>公共协议：在RFC(请求注解)中定义，例如HTTP/SMTP/BitTorrent</span></p></li><li><p><span>专用协议：例如Skype</span></p></li></ol></blockquote><h2 id='14-internet的qos服务质量要求'><span>1.4. Internet的QoS(服务质量)要求</span></h2><blockquote><p><span>丢包率，实时性(低时延)，吞吐量，安全性</span></p><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>应用程序</span></th><th style='text-align:center;' ><span>允许丢包？</span></th><th style='text-align:center;' ><span>吞吐量</span></th><th style='text-align:center;' ><span>具有时间敏感性？</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>文件传输</span></td><td style='text-align:center;' ><span>0</span></td><td style='text-align:center;' ><span>弹性的</span></td><td style='text-align:center;' ><span>0</span></td></tr><tr><td style='text-align:center;' ><span>e-mail</span></td><td style='text-align:center;' ><span>0</span></td><td style='text-align:center;' ><span>弹性的</span></td><td style='text-align:center;' ><span>0</span></td></tr><tr><td style='text-align:center;' ><span>Web文档</span></td><td style='text-align:center;' ><span>0</span></td><td style='text-align:center;' ><span>弹性的</span></td><td style='text-align:center;' ><span>0</span></td></tr><tr><td style='text-align:center;' ><span>实时音频/视频</span></td><td style='text-align:center;' ><span>1</span></td><td style='text-align:center;' ><span>音频: 5kbps-1Mbps</span><br /><span>视频:10kbps-5Mbps</span></td><td style='text-align:center;' ><span>1(100ms)</span></td></tr><tr><td style='text-align:center;' ><span>存储式音频/视频</span></td><td style='text-align:center;' ><span>1</span></td><td style='text-align:center;' ><span>音频: 5kbps-1Mbps</span><br /><span>视频:10kbps-5Mbps</span></td><td style='text-align:center;' ><span>1(几秒)</span></td></tr><tr><td style='text-align:center;' ><span>互动游戏</span></td><td style='text-align:center;' ><span>1</span></td><td style='text-align:center;' ><span>超过几kbs</span></td><td style='text-align:center;' ><span>1(100ms)</span></td></tr><tr><td style='text-align:center;' ><span>实时发信息</span></td><td style='text-align:center;' ><span>0</span></td><td style='text-align:center;' ><span>弹性的</span></td><td style='text-align:center;' ><span>是或不是</span></td></tr></tbody></table></figure></blockquote><h2 id='15-internet提供的传输服务'><span>1.5. Internet提供的传输服务</span></h2><blockquote><p><strong><span>1️⃣</span></strong><span>TCP服务</span></p><ol start='' ><li><p><span>提供：连接管理，可靠性控制，流量控制，拥塞控制</span></p></li><li><p><span>不提供：实时性，最小吞吐保障，安全性</span></p></li><li><p><span>TCP pro：安全套接字层(SSL)，是TCP在应用层上的强化</span></p></li></ol><p><strong><span>2️⃣</span></strong><span>UDP服务：只提供不可靠数据传输</span></p><p><strong><span>3️⃣</span></strong><span>流行Internet APP所采用的应用层/传输层协议</span></p><figure class='table-figure'><table><thead><tr><th><span>应用</span></th><th><span>应用层协议</span></th><th><span>支撑的传输层协议</span></th></tr></thead><tbody><tr><td><span>email</span></td><td><span>SMTP [RFC 2821]</span></td><td><span>TCP</span></td></tr><tr><td><span>远程终端访问</span></td><td><span>Telnet [RFC 854]</span></td><td><span>TCP</span></td></tr><tr><td><span>网页</span></td><td><span>HTTP [RFC 2616]</span></td><td><span>TCP</span></td></tr><tr><td><span>文件传输</span></td><td><span>FTP [RFC 959]</span></td><td><span>TCP</span></td></tr><tr><td><span>流式多媒体</span></td><td><span>HTTP (eg Youtube),   RTP [RFC 1889]</span></td><td><span>TCP or UDP(局域网内）</span></td></tr><tr><td><span>网络电话</span></td><td><span>SIP, RTP, proprietary</span></td><td><span>通常是UDP</span></td></tr></tbody></table></figure></blockquote></blockquote><h1 id='2-web和http'><span>2. Web和HTTP</span></h1><blockquote><h2 id='21-webhttp概述'><span>2.1. Web&amp;HTTP概述</span></h2><blockquote><h3 id='211-web'><span>2.1.1. Web</span></h3><blockquote><p><strong><span>1️⃣</span></strong><span>Web页面组成</span></p><ol start='' ><li><p><span>核心：基本HTML文件，包含主要内容结构+其他对象的引用</span></p></li><li><p><span>其他对象：包括图像/Java小程序/音频等</span></p></li></ol><p><strong><span>2️⃣</span></strong><span>每个对象都可以RUL寻址：以someschool.edu域名为例</span></p><p><img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20231216204321048.png" alt="image-20231216204321048" style="zoom: 50%;" /><span> </span></p></blockquote><h3 id='212-http超文本传输协议'><span>2.1.2. HTTP(超文本传输协议)</span></h3><blockquote><p><strong><span>1️⃣</span></strong><span>地位：是web在应用层的协议，用于通信</span></p><p><strong><span>2️⃣</span></strong><span>C-S模型：客户端浏览器(请求/接收/显示Web对象)，Web服务器(响应请求/发送对象)</span></p><p><strong><span>3️⃣</span></strong><span>HTTP的基础：TCP，过程如下</span></p><ol start='' ><li><p><span>HTTP客户端：发起TCP连接→创建套字(端口80)→连接服务器</span></p></li><li><p><span>Web服务器：接收TCP连接请求</span></p></li><li><p><span>交换数据，然后关闭TCP</span></p></li></ol><p><strong><span>4️⃣</span></strong><span>性质：是一个无状态的协议，服务器不保存客户端以前的请求</span></p></blockquote></blockquote><h2 id='22-非连续连续http'><span>2.2. 非连续/连续HTTP</span></h2><blockquote><h3 id='221-非连续http'><span>2.2.1. 非连续HTTP</span></h3><blockquote><p><strong><span>1️⃣</span></strong><span>含义：建立一次TCP只传送一个文件，传一个文件耗时2RTT+文件发送时间</span></p><p><img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20231216211524856.png" alt="image-20231216211524856" style="zoom:50%;" /><span> </span></p><p><strong><span>2️⃣</span></strong><span>示例：假设</span><code>www.xjtu.edu/dxxb/home.index</code><span>包含10张JPG+HTML文件，11个对象同在一服务器</span></p><p><span>过程为：</span></p><ol start='' ><li><p><span>HTTP客户端：在端口80发起连接</span><code>www.xjtu.edu</code><span>的TCP连接</span></p></li><li><p><span>HTTP客户端：向服务器发出HTTP请求报文(包含路径名</span><code>/dxxb/home.index</code><span>)</span></p></li><li><p><span>HTTP服务器：收到请求，从磁盘找出对象</span><code>home.index</code><span>并封装为响应报文，通过套接字发出</span></p></li><li><p><span>HTTP服务器：其服务进程通知TCP断开TCP连接</span></p></li><li><p><span>HTTP客户端：完整收到报文后，断开TCP连接</span></p></li></ol><p><code>home.index</code><span>是HTML文件(包含十张图片的索引)，根据索引再重复1-5来请求图片，共11次TCP连接</span></p><p><strong><span>3️⃣</span></strong><span>弊端：传输每个对象需要2RTT，浏览器总要打开并行TCP连接来获取对象</span></p></blockquote><h2 id='222-持续的http'><span>2.2.2. 持续的HTTP</span></h2><blockquote><p><strong><span>1️⃣</span></strong><span>含义：建立一次TCP可以发送多个对象，初始对象需要2RTT/后续就只要1RTT了</span></p><p><strong><span>2️⃣</span></strong><span>实现方式</span></p><ol start='' ><li><p><span>服务器发送响应后</span><mark><span>保持连接打开</span></mark><span>，通过打开的连接传输后续HTTP消息</span></p></li><li><p><span>客户端一遇引用的对象就发送请求</span></p></li></ol></blockquote></blockquote><h2 id='23-http报文格式开始行首部行实体主体'><span>2.3. HTTP报文格式：开始行+首部行+实体主体</span></h2><blockquote><p><img src="https://s2.loli.net/2023/12/16/y59xmF8IOaDnAGq.png" alt="image-20231216214237494" style="zoom:67%;" /><span>  </span></p><p><span>分为HTTP请求/响应报文，区别在于开始行为请求行/响应状态行</span></p></blockquote><h2 id='24-用户和服务器的交互cookie'><span>2.4. 用户和服务器的交互：Cookie</span></h2><blockquote><p><strong><span>1️⃣</span></strong><span>cookie是什么：存储在客户端本地的小文件，用于保存身份验证/用户偏好</span></p><p><strong><span>2️⃣</span></strong><span>cookie的四个组件：</span></p><ol start='' ><li><p><span>首部行cookie：在HTTP请求/响应报文的首部行中，都会有一行cookie</span></p></li><li><p><span>用户端的本地cookie：由浏览器管理，必要时发给服务器</span></p></li><li><p><span>Web站点后端数据库的cookie：保存用户的身份信息/偏好/使用历史</span></p></li></ol><p><strong><span>3️⃣</span></strong><span>示例：以使用Chrome访问</span><a href='https://pornhub.com/' target='_blank' class='url'>https://pornhub.com/</a><span>为例</span></p><p><mark><span>首次访问</span><a href='https://pornhub.com/' target='_blank' class='url'>https://pornhub.com/</a><span>网站</span></mark></p><ol start='' ><li><p><a href='https://pornhub.com/' target='_blank' class='url'>https://pornhub.com/</a><span>的Web站点：生成唯一识别码</span><code>&lt;xxx&gt;</code><span>，以此为索引项在后端数据库建立表项</span></p></li><li><p><a href='https://pornhub.com/' target='_blank' class='url'>https://pornhub.com/</a><span>服务器：给Chrome响应一个HTTP报文(包含</span><code>Set-Cookie:&lt;XXX&gt;</code><span>首部)</span></p></li><li><p><span>Chrome：看到返回的</span><code>Set-Cookie:&lt;XXX&gt;</code><span>后，在特定cookie文件加一行</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="cookie"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="cookie"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&lt;xvideo主机名&gt; &lt;识别码aaa&gt;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&lt;missav主机名&gt; &lt;识别码bbb&gt;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">....新增以下....</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&lt;pornhub主机名&gt; &lt;识别码xxx&gt;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre></li></ol><p><mark><span>继续访问</span><a href='https://pornhub.com/' target='_blank' class='url'>https://pornhub.com/</a><span>网站</span></mark></p><ol start='' ><li><p><span>每请求一个Web页面，浏览器就查询Cookie文件</span></p></li><li><p><span>抽取pornhub的识别码→将pornhub项加到HTTP请求报文的Cookie首部</span></p></li></ol><p><mark><span>再次访问</span><a href='https://pornhub.com/' target='_blank' class='url'>https://pornhub.com/</a><span>网站</span></mark></p><ol start='' ><li><p><span>Chrome：在请求报文中放入cookie首部行</span></p></li><li><p><a href='https://pornhub.com/' target='_blank' class='url'>https://pornhub.com/</a><span>服务器：会记住你喜欢看的猫娘</span></p></li></ol></blockquote><h2 id='25-web缓存代理服务器'><span>2.5. Web缓存&amp;代理服务器</span></h2><blockquote><h3 id='251-web缓存概述'><span>2.5.1. Web缓存概述</span></h3><blockquote><p><strong><span>1️⃣</span></strong><span>目的：减少客户端全球时间，节省流量</span></p><p><strong><span>2️⃣</span></strong><span>示例：假设Chrome请求xjtu.edu/temp.gif</span></p><ol start='' ><li><p><span>浏览器：建立xjtu.edu</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="4.611ex" height="3.19ex" role="img" focusable="false" viewBox="0 -1327.9 2037.9 1409.9" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.186ex;"><defs><path id="MJX-6-TEX-S4-2190" d="M944 261T944 250T929 230H165Q167 228 182 216T211 189T244 152T277 96T303 25Q308 7 308 0Q308 -11 288 -11Q281 -11 278 -11T272 -7T267 2T263 21Q245 94 195 151T73 236Q58 242 55 247Q55 254 59 257T73 264Q121 283 158 314T215 375T247 434T264 480L267 497Q269 503 270 505T275 509T288 511Q308 511 308 500Q308 493 303 475Q293 438 278 406T246 352T215 315T185 287T165 270H929Q944 261 944 250Z"></path><path id="MJX-6-TEX-S4-2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path><path id="MJX-6-TEX-S4-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-6-TEX-I-1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path><path id="MJX-6-TEX-I-1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path><path id="MJX-6-TEX-I-1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mstyle"><g data-mml-node="mo"><use data-c="2190" xlink:href="#MJX-6-TEX-S4-2190"></use><use data-c="2192" xlink:href="#MJX-6-TEX-S4-2192" transform="translate(1037.9,0)"></use><svg width="237.9" height="865" x="900" y="-182" viewBox="59.5 -182 237.9 865"><use data-c="2212" xlink:href="#MJX-6-TEX-S4-2212" transform="scale(0.459,1)"></use></svg></g></g><g data-mml-node="mpadded" transform="translate(0,870.8) scale(0.707)"><g transform="translate(333,-200)"><g data-mml-node="mi"><use data-c="1D447" xlink:href="#MJX-6-TEX-I-1D447"></use></g><g data-mml-node="mi" transform="translate(704,0)"><use data-c="1D436" xlink:href="#MJX-6-TEX-I-1D436"></use></g><g data-mml-node="mi" transform="translate(1464,0)"><use data-c="1D443" xlink:href="#MJX-6-TEX-I-1D443"></use></g><g data-mml-node="mspace" transform="translate(2215,0)"></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mover><mstyle scriptlevel="0"><mo data-mjx-texclass="REL">↔</mo></mstyle><mpadded width="+0.667em" lspace="0.333em" voffset="-.2em" height="-.2em"><mi>T</mi><mi>C</mi><mi>P</mi><mspace depth=".25em"></mspace></mpadded></mover></math></mjx-assistive-mml></mjx-container><script type="math/tex">\xleftrightarrow{TCP}</script><span>Web缓存器</span></p></li><li><p><span>Web缓存器：检查内部是否有temp.gif副本</span></p><ul><li><p><span>有：将副本</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="9.053ex" height="5.146ex" role="img" focusable="false" viewBox="0 -1359.7 4001.3 2274.4" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -2.069ex;"><defs><path id="MJX-7-TEX-S4-2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path><path id="MJX-7-TEX-S4-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-7-TEX-I-1D43B" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 219 683Q260 681 355 681Q389 681 418 681T463 682T483 682Q499 682 499 672Q499 670 497 658Q492 641 487 638H485Q483 638 480 638T473 638T464 637T455 637Q416 636 405 634T387 623Q384 619 355 500Q348 474 340 442T328 395L324 380Q324 378 469 378H614L615 381Q615 384 646 504Q674 619 674 627T617 637Q594 637 587 639T580 648Q580 650 582 660Q586 677 588 679T604 682Q609 682 646 681T740 680Q802 680 835 681T871 682Q888 682 888 672Q888 645 876 638H874Q872 638 869 638T862 638T853 637T844 637Q805 636 794 634T776 623Q773 618 704 340T634 58Q634 51 638 51Q646 48 692 46H723Q729 38 729 37T726 19Q722 6 716 0H701Q664 2 567 2Q533 2 504 2T458 2T437 1Q420 1 420 10Q420 15 423 24Q428 43 433 45Q437 46 448 46H454Q481 46 514 49Q520 50 522 50T528 55T534 64T540 82T547 110T558 153Q565 181 569 198Q602 330 602 331T457 332H312L279 197Q245 63 245 58Q245 51 253 49T303 46H334Q340 38 340 37T337 19Q333 6 327 0H312Q275 2 178 2Q144 2 115 2T69 2T48 1Q31 1 31 10Q31 12 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"></path><path id="MJX-7-TEX-I-1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path><path id="MJX-7-TEX-I-1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="munderover"><g data-mml-node="mstyle"><g data-mml-node="mo"><use data-c="2192" xlink:href="#MJX-7-TEX-S4-2192" transform="translate(3001.3,0)"></use><svg width="3101.3" height="865" x="0" y="-182" viewBox="775.3 -182 3101.3 865"><use data-c="2212" xlink:href="#MJX-7-TEX-S4-2212" transform="scale(5.979,1)"></use></svg></g></g><g data-mml-node="mpadded" transform="translate(760.9,-779.3) scale(0.707)"><g transform="translate(278,150)"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">返</text></g><g data-mml-node="mtext" transform="translate(894.8,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">回</text></g><g data-mml-node="mtext" transform="translate(1778.8,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">给</text></g><g data-mml-node="mspace" transform="translate(2673.5,0)"></g></g></g><g data-mml-node="mpadded" transform="translate(0,870.8) scale(0.707)"><g transform="translate(278,-200)"><g data-mml-node="mi"><use data-c="1D43B" xlink:href="#MJX-7-TEX-I-1D43B"></use></g><g data-mml-node="mi" transform="translate(888,0)"><use data-c="1D447" xlink:href="#MJX-7-TEX-I-1D447"></use></g><g data-mml-node="mi" transform="translate(1592,0)"><use data-c="1D447" xlink:href="#MJX-7-TEX-I-1D447"></use></g><g data-mml-node="mi" transform="translate(2296,0)"><use data-c="1D443" xlink:href="#MJX-7-TEX-I-1D443"></use></g><g data-mml-node="mtext" transform="translate(3047,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">响</text></g><g data-mml-node="mtext" transform="translate(3931,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">应</text></g><g data-mml-node="mspace" transform="translate(4825.8,0)"></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><munderover><mstyle scriptlevel="0"><mo data-mjx-texclass="REL">→</mo></mstyle><mpadded width="+0.833em" lspace="0.278em" voffset=".15em" depth="-.15em"><mtext>返</mtext><mtext>回</mtext><mtext>给</mtext><mspace height=".75em"></mspace></mpadded><mpadded width="+0.833em" lspace="0.278em" voffset="-.2em" height="-.2em"><mi>H</mi><mi>T</mi><mi>T</mi><mi>P</mi><mtext>响</mtext><mtext>应</mtext><mspace depth=".25em"></mspace></mpadded></munderover></math></mjx-assistive-mml></mjx-container><script type="math/tex">\xrightarrow[返回给]{HTTP响应}</script><span>Chrome</span></p></li><li><p><span>没有：缓存器建立一个新的TCP连接，通过新连接获取该对象副本，再返回给Chrome</span></p></li></ul></li></ol><p><strong><span>3️⃣</span></strong><span>Web缓存类型：代理Cache，</span><mark><span>客户端/服务端Cache</span></mark><span>，分布式Cache</span></p><p><img src="https://s2.loli.net/2023/12/16/S6vw1T24pbkN8Rf.png" alt="image-20231216234811836" style="zoom:50%;" /><span>  </span></p></blockquote><h3 id='252-代理cache'><span>2.5.2. 代理Cache</span></h3><blockquote><p><strong><span>1️⃣</span></strong><span>目的：不涉及源服务器条件下，满足客户需求</span></p><p><strong><span>2️⃣</span></strong><span>工作机理</span></p><ol start='' ><li><p><span>用户设置浏览器：通过缓存访问Web</span></p></li><li><p><span>浏览器：将所有HTTP请求发往代理缓存，缓存中有所需对象则直接访问缓存，没有的话再访问源服务器</span></p></li></ol><p><span>⚠️访问代理获得服务的速度，远快于访问源服务器</span></p></blockquote><h3 id='253-客户端cache'><span>2.5.3. 客户端Cache</span></h3><blockquote><p><strong><span>1️⃣</span></strong><span>客户端Cache的形成：代理服务器将对象发浏览器时，浏览器会在本地缓存该对象+最后修改日期</span></p><p><strong><span>2️⃣</span></strong><span>何时使用本地Cache：再代理服务器中的对象被修改前，都是用本地缓存的对象</span></p><p><strong><span>3️⃣</span></strong><span>如何知道代理服务器的的对象是否被改：条件GET方法，条件GET报文满足</span></p><ol start='' ><li><p><span>请求报文使用GET请求报文</span></p></li><li><p><span>请求报文包含If-Modified-Since首部</span></p></li></ol></blockquote><h3 id='254-分布式cache'><span>2.5.4. 分布式Cache</span></h3><blockquote><p><span>缓存间互相合作，改缓存中无访问的对象→访问其邻居，邻居都没有→才访问源服务器</span></p></blockquote><h3 id='255-服务器cache'><span>2.5.5. 服务器Cache</span></h3><blockquote><p><span>多服务器集群，内容可相同/不同，通过其中的轻载服务器(缓存)响应HTTP请求，广泛采用</span></p></blockquote></blockquote></blockquote><h1 id='3-email'><span>3. Email</span></h1><blockquote><h2 id='31-ftpfile-transfer-protocol'><span>3.1. FTP(File Transfer Protocol)</span></h2><blockquote><p><img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20231217011252900.png" alt="image-20231217011252900" style="zoom:50%;" /><span> </span></p><p><strong><span>1️⃣</span></strong><span>概述：作用是向主机传文件，采用C-S模式，FTP的端口号是21(用于连接控制)</span></p><p><strong><span>2️⃣</span></strong><span>两种连接：控制连接(21, 用于传输控制命令)，数据连接(20, 传输实际的文件内容)</span></p><p><img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20231217012457842.png" alt="image-20231217012457842" style="zoom: 50%;" /><span> </span></p></blockquote><h2 id='32-email组成'><span>3.2. Email组成</span></h2><blockquote><p><img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20231217020112990.png" alt="image-20231217020112990" style="zoom:61%;" /><span> </span></p><h3 id='321-用户代理'><span>3.2.1. 用户代理</span></h3><blockquote><p><strong><span>1️⃣</span></strong><span>比如Outlook/Gmail/Apple-mail</span></p><p><strong><span>2️⃣</span></strong><span>供用户读/写/发邮件，将邮件发往服务器的外出报文队列/从服务器中取邮件</span></p></blockquote><h3 id='322-邮件服务器核心'><span>3.2.2. 邮件服务器(核心)</span></h3><blockquote><p><strong><span>1️⃣</span></strong><span>Email一般过程：发送方代理→发送方邮件服务器→接收方邮件服务器→分发给接收方代理</span></p><p><strong><span>2️⃣</span></strong><span>Email不成功时：报文还在邮件服务器的报文队列中，多次尝试，再不济就删除并通知发送方</span></p></blockquote><h3 id='323-smtp简单邮件传输协议端口号25'><span>3.2.3. SMTP(简单邮件传输协议，端口号25)</span></h3><blockquote><p><strong><span>1️⃣</span></strong><span>功能：客户端</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="8.173ex" height="5.066ex" role="img" focusable="false" viewBox="0 -1359.7 3612.3 2239" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -1.989ex;"><defs><path id="MJX-8-TEX-S4-2190" d="M944 261T944 250T929 230H165Q167 228 182 216T211 189T244 152T277 96T303 25Q308 7 308 0Q308 -11 288 -11Q281 -11 278 -11T272 -7T267 2T263 21Q245 94 195 151T73 236Q58 242 55 247Q55 254 59 257T73 264Q121 283 158 314T215 375T247 434T264 480L267 497Q269 503 270 505T275 509T288 511Q308 511 308 500Q308 493 303 475Q293 438 278 406T246 352T215 315T185 287T165 270H929Q944 261 944 250Z"></path><path id="MJX-8-TEX-S4-2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path><path id="MJX-8-TEX-S4-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-8-TEX-I-1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path><path id="MJX-8-TEX-I-1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path><path id="MJX-8-TEX-I-1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="munderover"><g data-mml-node="mstyle"><g data-mml-node="mo"><use data-c="2190" xlink:href="#MJX-8-TEX-S4-2190"></use><use data-c="2192" xlink:href="#MJX-8-TEX-S4-2192" transform="translate(2612.3,0)"></use><svg width="1812.3" height="865" x="900" y="-182" viewBox="453.1 -182 1812.3 865"><use data-c="2212" xlink:href="#MJX-8-TEX-S4-2212" transform="scale(3.494,1)"></use></svg></g></g><g data-mml-node="mpadded" transform="translate(787.2,-779.3) scale(0.707)"><g transform="translate(333,150)"><g data-mml-node="mi"><use data-c="1D447" xlink:href="#MJX-8-TEX-I-1D447"></use></g><g data-mml-node="mi" transform="translate(704,0)"><use data-c="1D436" xlink:href="#MJX-8-TEX-I-1D436"></use></g><g data-mml-node="mi" transform="translate(1464,0)"><use data-c="1D443" xlink:href="#MJX-8-TEX-I-1D443"></use></g><g data-mml-node="mspace" transform="translate(2215,0)"></g></g></g><g data-mml-node="mpadded" transform="translate(0,870.8) scale(0.707)"><g transform="translate(333,-200)"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">输</text></g><g data-mml-node="mtext" transform="translate(894.8,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">邮</text></g><g data-mml-node="mtext" transform="translate(1778.8,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">件</text></g><g data-mml-node="mtext" transform="translate(2673.5,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">消</text></g><g data-mml-node="mtext" transform="translate(3557.5,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">息</text></g><g data-mml-node="mspace" transform="translate(4441.5,0)"></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><munderover><mstyle scriptlevel="0"><mo data-mjx-texclass="REL">↔</mo></mstyle><mpadded width="+0.667em" lspace="0.333em" voffset=".15em" depth="-.15em"><mi>T</mi><mi>C</mi><mi>P</mi><mspace height=".75em"></mspace></mpadded><mpadded width="+0.667em" lspace="0.333em" voffset="-.2em" height="-.2em"><mtext>输</mtext><mtext>邮</mtext><mtext>件</mtext><mtext>消</mtext><mtext>息</mtext><mspace depth=".25em"></mspace></mpadded></munderover></math></mjx-assistive-mml></mjx-container><script type="math/tex">\xleftrightarrow[TCP]{输邮件消息}</script><span>服务器，发送服务器</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="3.93ex" height="3.262ex" role="img" focusable="false" viewBox="0 -1359.7 1737 1441.7" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.186ex;"><defs><path id="MJX-9-TEX-S4-2190" d="M944 261T944 250T929 230H165Q167 228 182 216T211 189T244 152T277 96T303 25Q308 7 308 0Q308 -11 288 -11Q281 -11 278 -11T272 -7T267 2T263 21Q245 94 195 151T73 236Q58 242 55 247Q55 254 59 257T73 264Q121 283 158 314T215 375T247 434T264 480L267 497Q269 503 270 505T275 509T288 511Q308 511 308 500Q308 493 303 475Q293 438 278 406T246 352T215 315T185 287T165 270H929Q944 261 944 250Z"></path><path id="MJX-9-TEX-S4-2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mstyle"><g data-mml-node="mo"><use data-c="2190" xlink:href="#MJX-9-TEX-S4-2190"></use><use data-c="2192" xlink:href="#MJX-9-TEX-S4-2192" transform="translate(737,0)"></use></g></g><g data-mml-node="mpadded" transform="translate(0,870.8) scale(0.707)"><g transform="translate(333,-200)"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">直</text></g><g data-mml-node="mtext" transform="translate(894.8,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">连</text></g><g data-mml-node="mspace" transform="translate(1789.5,0)"></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mover><mstyle scriptlevel="0"><mo data-mjx-texclass="REL">↔</mo></mstyle><mpadded width="+0.667em" lspace="0.333em" voffset="-.2em" height="-.2em"><mtext>直</mtext><mtext>连</mtext><mspace depth=".25em"></mspace></mpadded></mover></math></mjx-assistive-mml></mjx-container><script type="math/tex">\xleftrightarrow{直连}</script><span>接收服务器</span></p><p><strong><span>2️⃣</span></strong><span>特点：运行在邮件服务器上，邮件内容只能是ASCII字符</span></p><p><strong><span>3️⃣</span></strong><span>SMTP报文格式</span></p><p><img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20231217015701062.png" alt="image-20231217015701062" style="zoom:50%;" /><span> </span></p><p><strong><span>4️⃣</span></strong><span>SMTP vs HTTP</span></p><ol start='' ><li><p><span>二者都是主机-主机传文件，都是用持续的连接</span></p></li><li><p><span>HTTP是拉协议(TCP连接由接收端发起)，SMTP是推协议(发送端发起)</span></p></li><li><p><span>HTTP一个对象就一个报文，SMTP所有对象塞一个报文里</span></p></li></ol><p><strong><span>5️⃣</span></strong><span>非ASCII邮件的扩展：MIME(多用途互联网邮件扩展)</span></p></blockquote></blockquote><h2 id='33-邮件访问协议服务器→代理'><span>3.3. 邮件访问协议：服务器→代理</span></h2><blockquote><p><strong><span>1️⃣</span></strong><span>POP3(端口110)：第三方邮局协议，内容为授权+下载，是无状态的</span></p><p><strong><span>2️⃣</span></strong><span>IMAP(端口143)：邮件访问协议，保持用户跨会话的状态(有状态的)</span></p><p><strong><span>3️⃣</span></strong><span>HTTP：如Gmail</span></p></blockquote></blockquote><h1 id='4-dns'><span>4. DNS</span></h1><blockquote><h2 id='41-概述'><span>4.1. 概述</span></h2><blockquote><p><strong><span>1️⃣</span></strong><span>背景：主机除可用IP&amp;域名标识，如我的域名xjtu.co.uk也是76.223.105.230，主机</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="5.327ex" height="3.262ex" role="img" focusable="false" viewBox="0 -1359.7 2354.5 1441.7" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.186ex;"><defs><path id="MJX-10-TEX-S4-2190" d="M944 261T944 250T929 230H165Q167 228 182 216T211 189T244 152T277 96T303 25Q308 7 308 0Q308 -11 288 -11Q281 -11 278 -11T272 -7T267 2T263 21Q245 94 195 151T73 236Q58 242 55 247Q55 254 59 257T73 264Q121 283 158 314T215 375T247 434T264 480L267 497Q269 503 270 505T275 509T288 511Q308 511 308 500Q308 493 303 475Q293 438 278 406T246 352T215 315T185 287T165 270H929Q944 261 944 250Z"></path><path id="MJX-10-TEX-S4-2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path><path id="MJX-10-TEX-S4-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mstyle"><g data-mml-node="mo"><use data-c="2190" xlink:href="#MJX-10-TEX-S4-2190"></use><use data-c="2192" xlink:href="#MJX-10-TEX-S4-2192" transform="translate(1354.5,0)"></use><svg width="554.5" height="865" x="900" y="-182" viewBox="138.6 -182 554.5 865"><use data-c="2212" xlink:href="#MJX-10-TEX-S4-2212" transform="scale(1.069,1)"></use></svg></g></g><g data-mml-node="mpadded" transform="translate(0,870.8) scale(0.707)"><g transform="translate(333,-200)"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">多</text></g><g data-mml-node="mtext" transform="translate(884,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">对</text></g><g data-mml-node="mtext" transform="translate(1778.8,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">多</text></g><g data-mml-node="mspace" transform="translate(2662.8,0)"></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mover><mstyle scriptlevel="0"><mo data-mjx-texclass="REL">↔</mo></mstyle><mpadded width="+0.667em" lspace="0.333em" voffset="-.2em" height="-.2em"><mtext>多</mtext><mtext>对</mtext><mtext>多</mtext><mspace depth=".25em"></mspace></mpadded></mover></math></mjx-assistive-mml></mjx-container><script type="math/tex">\xleftrightarrow{多对多}</script><span>IP</span></p><p><strong><span>2️⃣</span></strong><span>DNS什么是：由分层DNS服务器实现的分布式数据库，也是供主机查询分布式数据库的应用层协议</span></p><p><strong><span>3️⃣</span></strong><mark><span>DNS运行在UDP上，端口53</span></mark></p><p><strong><span>4️⃣</span></strong><span>DNS提供什么服务？</span></p><ol start='' ><li><p><span>主机(别)名—IP的转换</span></p></li><li><p><span>邮件服务器的别名，如DNS会将发给</span><a href='mailto:dann_hiroaki@ieee.org' target='_blank' class='url'>dann_hiroaki@ieee.org</a><span>的邮件指向IEEE的邮件服务器</span></p></li><li><p><span>负载分配：</span></p><ul><li><p><span>例如ieee.org运行在多个服务器上，对应多个IP，则DNS数据库会存储ieee.org的所有IP</span></p></li><li><p><span>客户端请求ieee.org时，DNS按一定顺序返回其所有IP，客户端选择最前排的IP响应</span></p></li></ul></li></ol></blockquote><h2 id='42-分布式分层数据库'><span>4.2. 分布式分层数据库</span></h2><blockquote><p><img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20231217023051363.png" alt="image-20231217023051363" style="zoom:50%;" /><span> </span></p><p><strong><span>1️⃣</span></strong><span>根域名服务器：管理所有顶级域名，不直接将域名转为IP，而是告诉本地域名服务器该去找哪个顶级域名服务器</span></p><p><strong><span>2️⃣</span></strong><span>顶级域名服务器</span></p><p><strong><span>3️⃣</span></strong><span>注册DNS服务器：不欠费就一直会记住你的域名，负责一个区</span></p><p><strong><span>4️⃣</span></strong><span>本地域名服务器：不在图中，一般和主机在同一个局域网</span></p></blockquote><h2 id='43-dns域名解析'><span>4.3. DNS域名解析</span></h2><blockquote><p><strong><span>1️⃣</span></strong><span>查找过程：主机先</span><mark><span>递归查询</span></mark><span>本地域名服务器，没查到则再</span><mark><span>以DNS客户</span></mark><span>身份迭代查询其他域名服务器</span></p><p><strong><span>2️⃣</span></strong><span>两种查询方式：以在纽约大学查询Massachusetts大学为例</span></p><p><img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20231217024936506.png" alt="image-20231217024936506" style="zoom: 40%;" /><span>  </span></p><ol start='' ><li><p><span>递归式(深度优先)：左边，本地域名服务器只向根域名服务器查询一次</span></p></li><li><p><span>迭代式(广度优先)：右边，根域名服务器收到本地域名服务器请求，返回IP/下一步要查哪个服务器</span></p></li></ol><p><strong><span>3️⃣</span></strong><span>补充：</span></p><ol start='' ><li><p><span>由于底层及DNS服务器缓存的存在，跟服务器基本被绕开了</span></p></li><li><p><span>实际上经常两种查询方式一起使用</span></p></li></ol></blockquote><h2 id='44-dns记录和报文'><span>4.4. DNS记录和报文</span></h2><blockquote><p><strong><span>1️⃣</span></strong><span>RR：即资源记录，存储在DNS服务器，格式为</span><code>&lt;Name，Value，Type，TTL&gt;</code><span>，具体含义见下</span></p><ol start='' ><li><p><span>TTL：记录存在的生命周期</span></p></li><li><p><span>其他：见下表，注意ieee.org的邮件其实使用的是Gmail，这点在MX里体现</span></p><figure class='table-figure'><table><thead><tr><th><span>Type</span></th><th><span>Name(实例)</span></th><th><span>Value(实例)</span></th><th><span>说明</span></th></tr></thead><tbody><tr><td><span>A</span></td><td><span>主机名(xjtu.co.uk)</span></td><td><span>IP(76.223.105.230)</span></td><td><span>主机名到IP的映射</span></td></tr><tr><td><span>NS</span></td><td><span>域名</span></td><td><span>可获得该域IP的DNS主机</span></td><td><span>用于DNS查询</span></td></tr><tr><td><span>CNAME</span></td><td><span>主机名</span></td><td><span>规范化的主机名</span></td><td><span>查找规范主机名</span></td></tr><tr><td><span>MX</span></td><td><span>邮送域(ieee.org)</span></td><td><span>邮件服务器的规范主机名(gmail.com)</span></td><td>&nbsp;</td></tr></tbody></table></figure></li></ol><p><strong><span>2️⃣</span></strong><span>DNS协议报文：注意前12字节是报头</span></p><p><img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20231217030706382.png" alt="image-20231217030706382" style="zoom: 67%;" /><span>  </span></p></blockquote></blockquote><h1 id='5-搜索引擎'><span>5. 搜索引擎</span></h1><blockquote><p><strong><span>1️⃣</span></strong><span>www可以视为图：页面是结点/URL是边，URL可以让一个页面跳转到另一个页面，好比两点用边相连</span></p><p><strong><span>2️⃣</span></strong><span>www中页面的索引</span></p><ol start='' ><li><p><span>关键字：URL</span></p></li><li><p><span>数据结构：线性表(存储URL指针+页面指针)，堆(存储可变长的标题+URL)，HASH表(避免重复访问)</span></p></li></ol><p><strong><span>3️⃣</span></strong><span>索引创建过程</span></p><ol start='' ><li><p><span>广度优先搜索：输入/散列/尝试放入URL，若URL已在表中则处理下个URL，不在的话就访问URL并加入表中</span></p></li><li><p><span>对表中每个URL，提取页面/标题的关键词</span></p></li></ol></blockquote><h1 id='6-socket编程'><span>6. Socket编程</span></h1><blockquote><p><strong><span>1️⃣</span></strong><span>服务器：要有一个Socket，通过它来收发段</span></p><p><strong><span>2️⃣</span></strong><span>客户端：要有一套接字(在本地由端口号识别)，客户端需要知道服务器的IP+Socket端口号</span></p></blockquote></div></div>
</body>
</html>