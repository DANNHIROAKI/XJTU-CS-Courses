# $\textbf{ER Modelling}$  

# $\textbf{1. Introduction}$ 

> ## $\textbf{1.1. Data→DBMS}$ 
>
> > **1️⃣**$\text{Data vs. Information:}$​ 
> >
> > |   $\textbf{Item}$    |                   定义                   |          描述           |        示例        |
> > | :------------------: | :--------------------------------------: | :---------------------: | :----------------: |
> > |    $\text{Data}$     | $\text{Known facts stored and recorded}$ |    $\text{Raw Data}$    |    $\text{123}$    |
> > | $\text{Information}$ |    $\text{Data presented in context}$    | $\text{Processed Data}$ | $\text{StuID=123}$ |
> >
> > **2️⃣**$\text{Metadata: }$ 
> >
> > 1. 含义：描述数据的数据，提供数据的背景和结构信息
> > 2. 示例：书籍的标题/作者/出版年份/$\text{ISBN}$​等信息
> >
> > **3️⃣**$\text{Database: }\textbf{Large integrated} \text{ and } \textbf{structured } \text{collection of data }$ 
> >
> > **4️⃣**$\text{DBMS (Database Management System)}$ 
> >
> > 1. 定义：$\text{Software designed to } \textbf{store/manage/facilitate access}\text{ to databases.}$ 
> > 2. 比如$\text{MySQL}$​​ 
> >
> 
> ## $\textbf{1.2. DB Development Process}$ 
> 
> > <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/97829699510.png" alt="97829699510" style="zoom: 52%;" /> 
> >
> > ### $\textbf{1.2.1. High Level Design}$
> >
> > > **1️⃣**$\text{Database Planning:}$ 比如企划银行的结构，有客户/账户/员工等以及对应关系
> > >
> > > <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/52230798001.png" alt="52230798001" style="zoom:33%;" /> 
> > >
> > > **2️⃣**$\text{System Definition:}$ 确定系统的边界与接口；比如抵押系统如何从客户系统获取必要信息
> > >
> > > **3️⃣**$\text{Requirements Definition/Analysis:}$​​ 确定系统需求(能实现什么)，比如银行系统能否汇率转换
> >
> > ### $\textbf{1.2.2. Core Design}$ 
> >
> > > **1️⃣**==$\text{Conceptual Design/ER Modelling}$== 
> > >
> > > <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240320014726037.png" alt="image-20240320014726037" style="zoom:56%;" /> 
> > >
> > > 1. 独立于物理实现的数据模型
> > > 2. 最常见的概念设计方法为$\text{ER Modelling}$
> > >    - 包含$\text{Entity(Employee)+Attributes(ssn/name/age)}$​​ 
> > >    - 常见的$\text{ER Diagram}$有$\text{Chen's}$还有$\text{Crow's Foot}$
> > >
> > > **2️⃣**==$\text{Logical Design/Relational Model}$==  
> > >
> > > ```sql
> > > Employee (ssn, name, age) -- Employee为关系，(ssn, name, age)为其三个属性
> > > ```
> > >
> > > 1. 独立于具体数据库的逻辑模型
> > >
> > > 2. 最常见的逻辑设计方法为$\text{Relational Model}$​
> > >
> > >    $\text{ER Modelling}\xrightarrow{\begin{cases}\text{Entity}\to{}\text{Reation(表)}\\\\\text{Attribute}\to\text{Attribute(列)}\end{cases}}\text{Relational Model}$
> > >
> > > **3️⃣**$\text{Physical Design:}$​​​​ 
> > >
> > > ```sql
> > > Employee (ssn CHAR(11), name VARCHAR(20), age INTEGER)
> > > ```
> > >
> > > 1. 实现具体数据库的物理模型
> > > 2. 其实就是$\text{Logical}\xrightarrow{\text{Choose data type}}\text{Physical}$​ 
> > >
> > > **4️⃣**$\text{Implementation \& Instance:}$ 
> > >
> > > 1. $\text{Implementation:}$ 通过$\text{MySQL Workbench}$创建表格
> > >
> > >    ```sql
> > >    CREATE TABLE Employee (
> > >       ssn CHAR(11),
> > >       name VARCHAR(20), 
> > >       age INTEGER, 
> > >       PRIMARY KEY (ssn)
> > >    );
> > >    ```
> > >
> > > 2. $\text{Instance:}$ 往实现好了的$\text{SQL}$​表格中填充数据
> > >
> > >    <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240523012348666.png" alt="image-20240523012348666" style="zoom:23%;" />  
> >
> > ### $\textbf{1.2.3. Other Design}$ 
> >
> > > **1️⃣**$\text{Application Design:}$ 设计使用数据库的用户界面$\text{APP}$
> > >
> > > **2️⃣**测试和维护

# $\textbf{2. ER Modelling (Chen's)}$ 

> ## $\textbf{2.1. Basic Concepts}$  
>
> > **1️⃣**概述
> >
> > |     $\textbf{Concept}$     |           解释            |                      备注                      |
> > | :------------------------: | :-----------------------: | :--------------------------------------------: |
> > |    $\text{Entity(Set)}$    |  真实世界中的对象(集合)   |             单个实体由多个属性描述             |
> > |     $\text{Attribute}$     |    对于一个实体的描述     | 实体的属性中必有一个$\text{Key}$(区分每个个体) |
> > | $\text{Relationship(Set)}$ | 两个/多个实体的联结(集合) |  关系也可能有$\text{(Descriptive)Attribute}$   |
> >
> > **2️⃣**综合示例($\text{(Chen's Model)}\begin{cases}\text{Entity: Employee/Department}\\\\\text{Relation: Works in}\end{cases}$ 
> >
> > <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240521142334082.png" alt="image-20240521142334082" style="zoom: 50%;" /> 
> >
> > - $\text{Primary Key}$要用下划线标出
> >
> > **3️⃣**注意事项： 
> >
> > 1. 同一实体可出现在不同关系
> > 2. 同一实体可有不同角色(员工的上下级)
> >
> > <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240319013123774.png" alt="image-20240319013123774" style="zoom: 50%;" /> 
>
> ## $\textbf{2.2. Relation}$ 
>
> > ### $\textbf{2.2.1. Binary: Relation Constraints}$ 
> >
> > > **0️⃣**关系基数：$\text{1-1/1-M/M-M}$三种
> > >
> > > <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240319171748574.png" alt="image-20240319171748574" style="zoom:50%;" /> 
> > >
> > > **1️⃣**$\text{Key/Cardinalitiy Constraints:}$ 确定了数量的==上限$\text{1/N}$== 
> > >
> > > |   关系类型   |   $\textbf{Employee(Manager)}$   | 员工键约束 |     $\textbf{Department}$      | 部门键约束 |
> > > | :----------: | :------------------------------: | :--------: | :----------------------------: | :--------: |
> > > | $\text{M-M}$ |  $\text{N}$(一部门有==多==员工)  |     ❌      | $\text{N}$(一员工在==多==部门) |     ❌      |
> > > | $\text{1-M}$ | $\text{1}$(一部门只有==一==经理) |     ✔️      | $\text{N}$(一经理管==多==部门) |     ❌      |
> > > | $\text{1-1}$ | $\text{1}$(一部门只有==一==经理) |     ✔️      | $\text{1}$(一经理管==一==部门) |     ✔️      |
> > >
> > > <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240521204353371.png" alt="image-20240521204353371" style="zoom:38%;" /> 
> > >
> > > **2️⃣**$\text{Participation Constraints:}$ 确定了数量的==下限$\text{0/1}$== 
> > >
> > > 1. $\text{Total/Partial Participation:}$​​  一个实体集中所有实体必须/非必须参与到关系中
> > >
> > > 2. $\text{Chen's}$表示：$\text{Total participation is represented by bold line}$​
> > >
> > >    <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240319185302286.png" alt="image-20240319185302286" style="zoom:50%;" /> 
> > >
> > > **3️⃣**两种限制的组合：确定了数量的==上下限== 
> > >
> > > |     $\textbf{Type}$     |         $\textbf{Participation}$ | $\textbf{Key Constraint}$ | $\textbf{E.g. Prof may teach\_lecture}$ |
> > > | :---------------------: | -------------------------------: | :-----------------------: | :-------------------------------------: |
> > > | $\text{Optional Many}$  | $\text{Partial}$(下限$\text{0}$) |     ❌(上限$\text{N}$)     |             $\text{0/1/N}$              |
> > > | $\text{Mandatory Many}$ |   $\text{Total}$(下限$\text{1}$) |     ❌(上限$\text{N}$)     |              $\text{1/N}$               |
> > > |  $\text{Optional One}$  | $\text{Partial}$(下限$\text{0}$) |     ✔️(上限$\text{1}$)     |              $\text{0/1}$               |
> > > | $\text{Mandatory One}$  |   $\text{Total}$(下限$\text{1}$) |     ✔️(上限$\text{1}$)     |               $\text{1}$                |
> > >
> > > - 注意$\text{Chen's}$模型中，靠近一方实体的线$\begin{cases}决定这一方实体的\text{Optional/Mandatory}\\\\决定另一方实体的\text{One/Many}(箭头指向\text{One})\end{cases}$ 
> >
> > ### $\textbf{2.2.2. Ternary Relationships}$
> >
> > > **1️⃣**含义：三个实体同时参与一个关系 
> > >
> > > **2️⃣**示例：
> > >
> > > <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240319194238726.png" alt="image-20240319194238726" style="zoom:50%;" /> 
> > >
> > > 1. 部门($\text{Depaertment}$)/供应商($\text{Supplier}$)之间，建立了一个有关组件($\text{Part}$​)的合同
> > > 2. 关系的属性包含了合同中组件的数量
>
> ## $\textbf{2.3. Entity: Weak Entity}$ 
>
> > **1️⃣**弱实体基本要素
> >
> > 1. 强弱实体
> >
> >    |      $\textbf{Entity}$       |           描述           |
> >    | :--------------------------: | :----------------------: |
> >    | $\text{Owner/Strong Entity}$ |  弱实体所赖以存在的实体  |
> >    |     $\text{Weak Entity}$     | 依赖于强实体而存在的实体 |
> >
> > 2. $\text{Identifying/Weak Relationship:}$​​ 连接强弱实体的关系，所有弱实体必定有一个弱关系
> >
> > **2️⃣**关于$\text{Weak Entity}$的$\text{Key}$ 
> >
> > |           $\textbf{Key}$           | 描述                                                         |
> > | :--------------------------------: | :----------------------------------------------------------- |
> > | $\text{Weak Entity}$的$\text{PK}$  | 又称为$\text{Partial Key}$，在$\text{Chen's}$中用虚下滑线表示 |
> > | $\text{Owner Entity}$的$\text{PK}$ | 塞进$\text{Weak Entity}$当$\text{PFK}$，识别弱实体要==自身$\text{PK+}$强实体$\text{PK(PFK)}$== |
> >
> > **3️⃣**如何辨认$\text{Weak Entity}$ 
> >
> > 1. 如果$\text{A}$不存在$\text{B}$也不能存在，则$\text{B}$是$\text{A}$的$\text{Weak Entity}$ 
> > 2. 如果需要识别出$\text{A}$，不仅要$\text{A}$的$\text{PK}$还需要$\text{B}$的$\text{PK}$，则$\text{B}$是$\text{A}$的$\text{Weak Entity}$
> > 3. $\text{Weak Entity}$和$\text{Owner Entity}$通常是$\text{1-M}$关系，且弱对强==一定是$\text{Mandatory One}$(粗箭头)== 
> >    - 弱实体必定有赖于强实体而存在($\text{Mandatory}$)
> >    - 弱实体也只能依赖唯一的强实体($\text{One}$)
> >
> > **4️⃣**$\text{Chen's ER Diagram:}$ 员工家属$\text{(Dependent)}$​是弱实体
> >
> > 1. 弱实体/弱关系边框**加粗** 
> > 2. $\text{Partial Key}$需要用==虚线==下划线标记
> >
> > <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240319192431916.png" alt="image-20240319192431916" style="zoom:50%;" /> 
>
> ## $\textbf{2.4. Attribute (Special Type)}$
>
> > ### $\textbf{2.4.1. Multi-Valued Attributes}$
> >
> > > **1️⃣**概念：一个属性拥有多个(但非无限)个同类型值，比如一个员工拥有多个电话
> > >
> > > **2️⃣**$\text{Chen's ER Diagram:}$​ 用镶嵌气泡表示
> > >
> > > <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240319195306061.png" alt="image-20240319195306061" style="zoom: 40%;" /> 
> >
> > ### $\textbf{2.4.2. Composite Attributes}$
> >
> > > **1️⃣**概念：拥有内部结构的属性，比如员工地址内还包含邮政编码/街道名/街道号
> > >
> > > **2️⃣**$\text{Chen's ER Diagram:}$ 气泡插到气泡上，
> > >
> > > <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240319200455024.png" alt="image-20240319200455024" style="zoom: 50%;" /> 
> >
> > ### $\textbf{2.4.3. Derived Attributes}$
> >
> > > **1️⃣**含义：从别的属性派生出来的属性
> > >
> > > **2️⃣**特点：并不会在物理层面存储该属性，所以在物理设计阶段就会消失
> > >
> > > **3️⃣**$\text{Chen's ER Diagram:}$​ 用虚框表示
> > >
> > > <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240325215010330.png" alt="image-20240325215010330" style="zoom:65%;" /> 
> > >
> > > - $\text{Years Employeed}$可以由以下规则派生
> > >
> > >   ```sql
> > >   DATE.now - Contact.start
> > >   ```
> > >   
>
> ## $\textbf{2.5. Conceptual Design: Entity or Attribute?}$​ 
>
> > **1️⃣**通常情况下，选择设计成$\text{Entity}$比设计成$\text{Attribute}$灵活性更高，也是首选
> >
> > **2️⃣**示例：用户($\text{UserID}$订阅$\text{Plan}$及其$\text{Type}$ 
> >
> > <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240522011321373.png" alt="image-20240522011321373" style="zoom:30%;" /> 
> >
> > 1. 当$\text{Type}$为$\text{Attribute:}$ 如果要新增$\text{TypeX}$，则需强制增加一个使用$\text{TypeX}$的$\text{UserID}$，明显不行
> >
> >    | $\textbf{Plan}$表 | $\textbf{UserID}$ | $\textbf{Type}$ |
> >    | :---------------: | :---------------: | :-------------: |
> >    |    $\text{\\}$    |    $\text{1}$     | $\text{TypeA}$  |
> >    |    $\text{\\}$    |    $\text{2}$     | $\text{TypeB}$  |
> >    |    $\text{\\}$    |    $\text{3}$     | $\text{TypeC}$  |
> >    |    $\text{\\}$    |    $\text{?}$     | $\text{TypeX}$  |
> >
> > 2. 当$\text{Type}$为$\text{Entity:}$ 可以灵活新增$\text{TypeX}$，不鸟$\text{UserID}$如何独立存在
> >
> >    | $\textbf{Plan}$表 | $\textbf{UserID}$ | $\textbf{Plan}$表 | $\textbf{TypeID}$ |
> >    | :---------------: | :---------------: | :---------------: | :---------------: |
> >    |    $\text{\\}$    |    $\text{1}$     |    $\text{\\}$    |    $\text{A}$     |
> >    |    $\text{\\}$    |    $\text{2}$     |    $\text{\\}$    |    $\text{B}$     |
> >    |    $\text{\\}$    |    $\text{3}$     |    $\text{\\}$    |    $\text{C}$     |
> >    |    $\text{\\}$    |    $\text{\\}$    |    $\text{\\}$    |    $\text{X}$     |

# $\textbf{3. ER Modelling (Crow's Foot)}$  

> ## $\textbf{3.1. Basic Component}$ 
>
> > **1️⃣**$\text{Entity}$ ​
> >
> > |  $\textbf{Concept}$  |                  $\textbf{Chen's Notation}$                  |               $\textbf{Crow's Foot Notation}$                |
> > | :------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
> > |   $\text{Entity}$    | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518163501986.png" alt="image-20240518163501986" style="zoom:33%;" /> | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518163515870.png" alt="image-20240518163515870" style="zoom:33%;" /> |
> > | $\text{Weak Entity}$ | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518163508676.png" alt="image-20240518163508676" style="zoom:33%;" /> | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518163516766.png" alt="image-20240518163516766" style="zoom:33%;" /> |
> >
> > **2️⃣**$\text{Attributes}$​ 
> >
> > 1. 各种类型的属性
> >
> >    |  $\textbf{Concept}$   |                  $\textbf{Chen's Notation}$                  |               $\textbf{Crow's Foot Notation}$                |
> >    | :-------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
> >    |  $\text{Attribute}$   | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518164028012.png" alt="image-20240518164028012" style="zoom:43%;" /> | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518164202668.png" alt="image-20240518164202668" style="zoom:48%;" /> |
> >    | $\text{Mutivalue A.}$ | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518164035655.png" alt="image-20240518164035655" style="zoom:43%;" /> | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518164213482.png" alt="image-20240518164213482" style="zoom:48%;" /> |
> >    | $\text{Composote A.}$ | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518164057870.png" alt="image-20240518164057870" style="zoom:43%;" /> | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518164232122.png" alt="image-20240518164232122" style="zoom:48%;" /> |
> >    |  $\text{Derived A.}$  | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518164107217.png" alt="image-20240518164107217" style="zoom:43%;" /> | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518164239905.png" alt="image-20240518164239905" style="zoom:48%;" /> |
> >
> > 2. $\text{Key(Covered Later in Relational Model)}$​ 
> >
> >    |      $\textbf{Concept}$      |                  $\textbf{Chen's Notation}$                  |               $\textbf{Crow's Foot Notation}$                |
> >    | :--------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
> >    |       $\text{Key A.}$        | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518164627582.png" alt="image-20240518164627582" style="zoom:45%;" /> | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518164645733.png" alt="image-20240518164645733" style="zoom:46%;" /> |
> >    | $\text{Weak/Partial Key A.}$ | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518164636943.png" alt="image-20240518164636943" style="zoom:45%;" /> | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518164655854.png" alt="image-20240518164655854" style="zoom:46%;" /> |
> >
> > 3. 示例($\text{In Workbench}$​​​)
> >
> >    | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240522133429885.png" alt="image-20240522133429885" style="zoom:42%;" /> | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/94345676140.png" alt="94345676140" style="zoom:2.66666666666666666666%;" /> | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240522133437015.png" alt="image-20240522133437015" style="zoom:42%;" /> | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240522133450052.png" alt="image-20240522133450052" style="zoom:42%;" /> |
> >    | :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
> >    |                     $\text{Primary Key}$                     |                     $\text{Foreign Key}$                     |                $\text{Mandatory}$/`NOT NULL`                 |                   $\text{Optional}$/`NULL`                   |
> >
> >    <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/83875134128.png" alt="83875134128" style="zoom:30%;" /> 
> >
> > **3️⃣**$\text{Relationship}$​ 
> >
> > 1. 强弱关系
> >
> >    |               $\textbf{Concept}$               |                      $\textbf{Chen's}$                       |                    $\textbf{Crow's Foot}$                    |
> >    | :--------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
> >    |             $\text{Relationship}$              | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518165011981.png" alt="image-20240518165011981" style="zoom:50%;" /> | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518165040391.png" alt="image-20240518165040391" style="zoom:50%;" /> |
> >    | $\text{Relationship/Identifying Relationship}$ | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518165021699.png" alt="image-20240518165021699" style="zoom:50%;" /> | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518165050138.png" alt="image-20240518165050138" style="zoom: 50%;" /> |
> >
> > 2. 示例   
> >
> >    <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/94996180436.png" alt="94996180436" style="zoom:43%;" /> 
>
> ## $\textbf{3.2. Relationship Constraints}$ 
>
> > **1️⃣**$\text{Constraints}$​ 
> >
> > |     $\textbf{Type}$     |              $\textbf{Chen's Vs. Crow's Foot}$               |                 $\textbf{Crow's Foot E.g.}$                  |
> > | :---------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
> > | $\text{Optional Many}$  | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518171505689.png" alt="image-20240518171505689" style="zoom: 35%;" /> | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240522134319756.png" alt="image-20240522134319756" style="zoom: 20%;" /> |
> > | $\text{Mandatory Many}$ | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518171514714.png" alt="image-20240518171514714" style="zoom:35%;" /> | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240522134524459.png" alt="image-20240522134524459" style="zoom:20%;" /> |
> > |  $\text{Optional One}$  | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518171524051.png" alt="image-20240518171524051" style="zoom:35%;" /> | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240522134423007.png" alt="image-20240522134423007" style="zoom:20%;" /> |
> > | $\text{Mandatory One}$  | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518171531204.png" alt="image-20240518171531204" style="zoom:35%;" /> | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240522134439743.png" alt="image-20240522134439743" style="zoom:20%;" /> |
> >
> > **2️⃣**$\text{Relationship (Cardinalitiy Only)}$​​ 
> >
> > | $\textbf{Type}$ |                      $\textbf{Chen's}$                       |                    $\textbf{Crow's Foot}$                    |
> > | :-------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
> > |  $\text{M-M}$   | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518171742431.png" alt="image-20240518171742431" style="zoom: 40%;" /> | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518171825584.png" alt="image-20240518171825584" style="zoom:40%;" /> |
> > |  $\text{1-M}$   | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518171751329.png" alt="image-20240518171751329" style="zoom:40%;" /> | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518171844711.png" alt="image-20240518171844711" style="zoom:40%;" /> |
> > |  $\text{1-1}$   | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518171758048.png" alt="image-20240518171758048" style="zoom:40%;" /> | <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518171854779.png" alt="image-20240518171854779" style="zoom:40%;" /> |
> >
>
> ## ==$\textbf{3.3. Chen's}\xleftrightarrow{转换}\text{Crow's Foot}$==
>
> > **1️⃣**转换的核心规则：$\text{Crow's Foot}$一侧的鸦足标记$\xleftrightarrow{对应}\text{Chen's}$另一侧的线/箭头
> >
> > **2️⃣**示例
> >
> > <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240523000452409.png" alt="image-20240523000452409" style="zoom:45%;" /> 

# $\textbf{4. Relational Model}$ 

> ## $\textbf{4.1. Basic Conception}$ 
>
> > **1️⃣**$\text{Relational Data Model}$ 
> >
> > 1. $\text{Data Model:}$ 将$\text{Real-World}$实体转化为计算机$\text{Readable}$的结构，比如$\text{Relational Model}$ 
> >
> > 2. $\text{Relational Model}$​​​的基本要素: 
> >
> >    <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240319210614082.png" alt="image-20240319210614082" style="zoom:50%;" /> 
> >
> >    - $\text{Schema: }$关系(表格)的名称$\text{+}$表格每列的属性名/属性类型
> >    - $\text{Instance: }$表格每行的$\text{Tuple}$  
> >
> > 3. $\text{Data→Relational Model}$转换
> >
> >    $\text{Data}\xrightarrow[\text{Represent Data With Table}]{\begin{cases}\text{Tuple/Record}\to{}\text{Row}\\\\\text{Attribute}\to{}\text{Column}\end{cases}}\text{Relational Model}$  
> >
> > **2️⃣**$\text{Relational Databases: }$利用$\text{Relation}$存储数据的数据库 
> >
> > 1. $\text{Records}\xrightarrow[组成]{\text{一系列记录}}\text{Relations}\xrightarrow[组成]{\text{一系列关系}}\text{Relational Databases}$ 
> > 2. $\text{Relations}\xrightarrow{\text{Populated With Actual Data}}\text{Instance/Table}$​ 
> >
> > **3️⃣**$\text{Cardinality/Degree}$ 
> >
> > 1. 含义
> >
> >    |                           |         含义         |                    备注                     |
> >    | :------------------: | :-----------------------------------------: | :----------: |
> >    | $\text{Cardinality}$ |  表中$\text{Rows/Records/Tuples}$数量   | 表中记录可以无序，但要唯一 |
> >    |   $\text{Degree}$    | 表中$\text{Column/Attributes/Fields}$数量 | $\text{N/A}$ |
> >
> > 2. 示例：$\text{Cardinality=3/Degree=5/All Rows Distinct}$ 
> >
> >     <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518181216754.png" alt="image-20240518181216754" style="zoom:60%;" />     
>
> ## $\textbf{4.2. Key}$ 
>
> > **1️⃣**$\text{Super Key:}$ 
> >
> > 1. 含义：$\text{A set of attributes that uniquely identifies each tuple}$(一个/多个属性都行)
> >
> > 2. 特点：
> >
> >    - $\text{Super Key Value}\xleftrightarrow{一一对应}\text{Tuple}$ 
> >    - 每个关系必定有一组属性组成超键(因为关系中每行必唯一)
> >    - 假设属性集$\text{A}$是$\text{Super Key}$，则$\text{A+}$任意其他$\text{Attributes}$也是$\text{Super Key}$ 
> >
> > 3. 示例：$\text{Super Key}$​为`names+login+age`
> >
> >    <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518184312707.png" alt="image-20240518184312707" style="zoom: 23%;" />    
> >
> > **2️⃣**$\text{Primary Key(PK)}$​   
> >
> > 1. $\text{Key in a Relationship:}$ 
> >
> >    - 最小化的$\text{Super Ksy}$，用最少的信息区分每一个$\text{Tuple}$​ 
> >    - 即使是最小化，但也不一定只有一个属性
> >
> > 2. 两种键类型
> >
> >    <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240615164114655.png" alt="image-20240615164114655" style="zoom: 20%;" />   
> >
> >    | $\textbf{Key Type}$ |            含义            |         备注         |  示例   |
> >    | :-----------------: | :------------------------: | :------------------: | :-----: |
> >    |  $\text{Primary}$   | 唯一标识每个记录的属性(集) | 每个关系只有一个主键 |  `sid`  |
> >    | $\text{Candidate}$  | 所有可能作为主键的属性(集) |  基本和主键混为一谈  | `login` |
> >
> > 3. 特殊键类型
> >
> >    <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518190205425.png" alt="image-20240518190205425" style="zoom:34%;" /> 
> >
> >    | $\textbf{Key Type}$ |        含义        |            备注            |     示例     |
> >    | :-----------------: | :----------------: | :------------------------: | :----------: |
> >    | $\text{Composite}$  | 多个属性组成的主键 |    无单一属性主键时适用    |  `sid+name`  |
> >    | $\text{Surrogate}$  | 自定义的(代理)主键 | 无任何属性当主键，就自定义 | $\text{N/A}$ |
> >
> >    - 代理键在$\text{MySQL}$中的值，默认为$\text{1/2/3.....}$即$\text{Auto-Incremented}$  
> >
> > **3️⃣**$\text{Foreign Key(FK)}$ 
> >
> > 1. $\text{Foreign Key(FK)}$​
> >
> >    - 含义
> >
> >      |   $\textbf{Type}$    |                概念                 | 示例                      |
> >      | :------------------: | :---------------------------------: | :------------------------ |
> >      | $\text{Primary key}$ | 确保表中每个记录都唯一，能唯一定位  | `course.cid, Student.sid` |
> >      | $\text{Foreign Key}$ | 指向另一个表格中$\text{Data Entry}$ | `course.sid`              |
> >
> >    - 示例
> >
> >      <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240320032739617.png" alt="image-20240320032739617" style="zoom: 60%;" /> 
> >
> > 2. $\text{Primary Foreign Key(PFK)}$
> >
> >    - 含义：既是自的$\text{PK}$又是别的关系的$\text{FK}$，常见于$\text{Associative Entity}$ / $\text{Weak Entity}$ 
> >
> >    - 示例：中间联结表的两个键
> >
> >      <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240522022647965.png" alt="image-20240522022647965" style="zoom: 39.9%;" /> 
> >
>
> ## $\textbf{4.3. Integrity}$(完整性)
>
> > **1️⃣**$\text{Integrity Constraint:}$​​ 建立表格所要满足一下所有条件
> >
> > | $\textbf{Integrity Constraint}$ | 描述                                                         |
> > | :-----------------------------: | :----------------------------------------------------------- |
> > |          $\text{Key}$           | 关系的$\text{Primary Key}$必须唯一                           |
> > | $\text{Referential Integrity}$  | 所有$\text{Foreign Key}$(引用)必须有效                       |
> > |    $\text{Domain Integrity}$    | 作$\text{Data Type}$的区分，比如只给整数属性上输入整数数据   |
> > |    $\text{Entity Integrity}$    | 属性值可以$\text{Optional}$($\text{NULL}$)，或者必须有值($\text{NOT NULL}$) |
> >
> > **2️⃣**示例
> >
> > <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240320032739617.png" alt="image-20240320032739617" style="zoom: 60%;" /> 
> >
> > |      操作对象      |                  操作行为                   |                  结果                   |
> > | :----------------: | :-----------------------------------------: | :-------------------------------------: |
> > | $\text{Enroll}$表  | 插入记录(其`sid`不存在于$\text{Student}$表) |        违反完整性约束$\to{}$拒绝        |
> > | $\text{Student}$表 |                删除一个记录                 | 同时也删除对应$\text{Enroll}$表中的数据 |

# $\textbf{5. ER→Relational Model}$ 

> ## $\textbf{5.1. Entity Conversion}$ 
>
> > ### $\textbf{5.1.1. Single Entity}$​ 
> >
> > > **1️⃣**转换原理
> > >
> > > |         $\textbf{Entity}$的$\textbf{Attributes}$类型         |               操作               |
> > > | :----------------------------------------------------------: | :------------------------------: |
> > > |                           普通情况                           |             正常转换             |
> > > |                $\text{Composite Attributes}$                 | 把复合属性展开($\text{Flatten}$) |
> > > | $\text{Multi-Valued Attributes (Small/Fixed Number of Values)}$ |               展开               |
> > > |  $\text{Multi-Valued Attributes (Large Number of Values)}$   |         创建新表(弱实体)         |
> > > |                 $\text{Derived Attributes}$                  |             直接忽略             |
> > >
> > > **2️⃣**$\text{Chen's}$的转换示例
> > >
> > > 1. 普通情况：
> > >
> > >    <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518212734566.png" alt="image-20240518212734566" style="zoom:50%;" /> 
> > >
> > >    ```sql
> > >    Employee(SSN(Key),Name,Age)
> > >    ```
> > >
> > > 2. $\text{Composite Attributes:}$ 去除原有复合属性，展开内部的属性​
> > >
> > >    <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518213915791.png" alt="image-20240518213915791" style="zoom: 44%;" />  
> > >
> > >    ```sql
> > >    Employee(SSN(Key),Name,Age,Postcode,Street_name,Street_num)
> > >    ```
> > >
> > > 3. $\text{Multi-Valued Attribute:}$ 去除原有多值属性，展开内部的属性
> > >
> > >    <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518213705102.png" alt="image-20240518213705102" style="zoom:42%;" />   
> > >
> > >    ```sql
> > >    Employee(SSN(Key),Name,Age,Num_1,Num_2)
> > >    ```
> > >
> > > **3️⃣**$\text{Crow's Foot}$​示例
> > >
> > > 1. $\text{Composite Attributes:}$ 去掉复合属性本身，展开复合属性内部的属性​ 
> > >
> > >    <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/2370265737.png" alt="2370265737" style="zoom:29%;" /> $\Longrightarrow$​<img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/65116322242.png" alt="65116322242" style="zoom:30%;" />  
> > >
> > > 2. $\text{Multi-Valued Attributes (Small/Fixed Number of Values)}\to{}$​​直接展开​
> > >
> > >    <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/57949231549.png" alt="57949231549" style="zoom: 15%;" />$\Longrightarrow$ <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518220637689.png" alt="image-20240518220637689" style="zoom:20%;" />  
> > >
> > > 3. $\text{Multi-Valued Attributes (Large Number of Values)}$​    
> > >
> > >    - 建立$\text{1-N}$关系：$\text{1-Employee}\xrightarrow{\text{Plays}}\text{N-Roles}$，建立$\text{Role}$弱实体
> > >
> > >      <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/57949231549.png" alt="57949231549" style="zoom: 13%;" /> $\Longrightarrow$<img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240327042206853.png" alt="image-20240327042206853" style="zoom:46%;" /> 
> > >
> > >    - 建立$\text{N-N}$关系：$\text{N-Employee}\xrightarrow{\text{Plays}}\text{N-Roles}$，建立$\text{Role}$弱实体$+$一个联结表
> > >
> > >      <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/57949231549.png" alt="57949231549" style="zoom: 13%;" /> $\Longrightarrow$<img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240523153539118.png" alt="image-20240523153539118" style="zoom:23%;" />   
> >
> > ### $\textbf{5.1.2. Weak Entity}$
> >
> > > **1️⃣**规则：其实也就是说辨认一个$\text{Weak Entity}$需要——自身$\text{PK+Strong Entity}$的$\text{PK}$
> > >
> > > |  弱实体的键  | 规则                                 | 备注                     |
> > > | :----------: | ------------------------------------ | ------------------------ |
> > > | 弱实体的主键 | 强实体的主键$+$弱实体自身一/多个属性 | $\text{N/A}$             |
> > > | 弱实体的外键 | 强实体的主键                         | $\text{Aka PFK}$(外主键) |
> > >
> > > **2️⃣**$\text{Chen's}$示例：箭头指向一侧的$\text{PK}$过来，到箭头的另一端当==$\text{PFK}$==
> > >
> > > <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240320054233153.png" alt="image-20240320054233153" style="zoom:50%;" /> 
> > >
> > > ```sql
> > > CREATE TABLE Dependent (
> > >    dname CHAR(20) NOT NULL,
> > >    age INTEGER NULL,
> > >    cost DECIMAL(7,2) NOT NULL,
> > >    ssn CHAR(11) NOT NULL,
> > >    PRIMARY KEY (dname, ssn), -- weak+owner key as composite primary key
> > >    FOREIGN KEY (ssn) REFERENCES Employees   -- refer to owner entity
> > >    ON DELETE CASCADE -- Owner deleted, all weak entities deleted(确保完整性)
> > > );
> > > ```
> > >
> > > - 注意`ON DELETE CASCADE`，意思是主实体删除时，弱实体也随之删除
> > >
> > > **3️⃣**$\text{Crow's Foot}$​示例
> > >
> > > <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240331220340189.png" alt="image-20240331220340189" style="zoom: 45%;" />  
>
> ## $\textbf{5.2. Relationship Conversion}$
>
> > ### $\textbf{5.2.1. Unary Relationship}$
> >
> > > |       $\textbf{Typle}$       |                  处理方法                  |
> > > | :--------------------------: | :----------------------------------------: |
> > > |         $\text{1-1}$         | $\text{Put a Foreign key in the relation}$ |
> > > | $\text{1-N(Key Constrains)}$ | $\text{Put a Foreign key in the relation}$ |
> > > |         $\text{N-N}$         |  $\text{Generate an Associative Entity}$   |
> > >
> > > **1️⃣**$\text{1-1}$关系示例：婚姻关系，一个人的主键变成另一个人的外键，即增加一个配偶$\text{ID}$外键
> > >
> > > <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240327070444793.png" alt="image-20240327070444793" style="zoom:60%;" /> $\Longrightarrow$​<img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240327070603097.png" alt="image-20240327070603097" style="zoom:60%;" /> 
> > >
> > > **2️⃣**$\text{1-N}$​关系示例：员工(包含部分管理者)关系，管理者的主键成为员工的外键
> > >
> > > <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240331203754056.png" alt="image-20240331203754056" style="zoom: 70%;" /> $\Longrightarrow$​<img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240331203901858.png" alt="image-20240331203901858" style="zoom: 70%;" /> 
> > >
> > > **3️⃣**$\text{N-N}$关系示例：$\text{Item}$(包括各种$\text{Componment}$成分)关系，建立$\text{Componment}$​弱实体
> > >
> > > <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240523011423047.png" alt="image-20240523011423047" style="zoom: 29%;" /> $\Longrightarrow$<img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240523011503080.png" alt="image-20240523011503080" style="zoom:30%;" />  
> > >
> > > 1. 弱实体的两个外键成为复合主键
> > > 2. 弱实体要包含关系的描述属性($\text{Descriptive Attributes}$​)
> > >
> >
> > ### $\textbf{5.2.2. Binary Relationship}$ 
> >
> > > **1️⃣**$\text{N-N}$关系：
> > >
> > > 1. 规则：
> > >
> > >    - 建立$\text{Associative Entity}\xrightarrow{包含}\text{Descriptive Attributes+}$两边的$\text{PK}$(作为自身$\text{PFK}$)
> > >
> > >    - $\text{Associative Entity}$是原有两实体的$\text{Weak Entity}$ 
> > >    - $\text{Crow's Foot}$转换时，关系种类交叉处理==(详见示例<font color="red">**红虚线**</font>)== 
> > >
> > > 2. $\text{Chen's}$示例：创建新关系`Works_In(ssn, did, since)`
> > >
> > >    <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240320042219262.png" alt="image-20240320042219262" style="zoom: 60%;" />  
> > >
> > >    |       $\textbf{Relations}$       | $\textbf{PK}$ | $\textbf{FK}$ |
> > >    | :------------------------------: | :-----------: | :-----------: |
> > >    |    `Employee(ssn, name, age)`    |     `ssn`     |     `N/A`     |
> > >    | `Department(did, dname, budget)` |     `did`     |     `N/A`     |
> > >    |   `Works_In(ssn, did, since)`    |   `ssn,did`   |   `ssn,did`   |
> > >
> > > 3. $\text{Crow's Foot}$示例：$\text{Conceptual}\to{}\text{Physical}$​​​ 
> > >
> > >    - 注意联结实体实质上是一个弱实体(实线)，联结实体的行数是联结两端的行数乘积
> > >
> > >    - 原有的$\text{Crow's Foot}$标志需要交叉放置
> > >
> > >      <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240523010523138.png" alt="image-20240523010523138" style="zoom: 38%;" /> 
> > >
> > > 4. $\text{Implemetation}$ 
> > >
> > >    ```sql
> > >    CREATE TABLE Customer (
> > >      CustomerID INT PRIMARY KEY, -- 此处记得空两格，记得逗号; 可以在此处就定义PK
> > >      CustFirstName VARCHAR(45)
> > >    );
> > >    CREATE TABLE Address (
> > >      AddressID INT,
> > >      StreetNumber VARCHAR(45),
> > >      PRIMARY KEY (AddressID)  -- 也可以在最末尾定义PK
> > >    );
> > >    CREATE TABLE Address_has_Customer (
> > >      AddressID INT,
> > >      CustomerID INT,
> > >      AddressDateFrom VARCHAR(45),
> > >      AddressDateTo VARCHAR(45),
> > >      PRIMARY KEY (AddressID, CustomerID),
> > >      FOREIGN KEY (AddressID) REFERENCES Address(AddressID),  -- 指明FK的起始
> > >      FOREIGN KEY (CustomerID) REFERENCES Customer(CustomerID)
> > >    );
> > >    ```
> > >
> > > **2️⃣**$\text{1-N}$​关系($\text{Key Constraints}$) 
> > >
> > > |         类型         |                             规则                             |
> > > | :------------------: | :----------------------------------------------------------: |
> > > | $\text{Crow's Foot}$ |     $\text{PK from ONE side}\to{}\text{FK at MANY side}$     |
> > > |   $\text{Chen's}$    | 箭头指向一侧的$\text{PK}$过来，到箭头的另一端当==$\text{FK}$==，同时描述属性也过来 |
> > >
> > > 1. $\text{Crow's Foot}$示例：一个客户有多个账户
> > >
> > >    <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240518235315127.png" alt="image-20240518235315127" style="zoom:40%;" /> 
> > >
> > > 2. $\text{Chen's}$​示例
> > >
> > >    <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240320051340819.png" alt="image-20240320051340819" style="zoom: 67%;" /> 
> > >
> > >    ```sql
> > >    Employee (ssn, name, age)                   -- PK ssn
> > >    Department (did, dname, budget, ssn, since) -- PK did + FK ssn
> > >
> > > **3️⃣**$\text{1-1}$关系
> > >
> > > 1. 规则
> > >
> > >    | 关系的$\textbf{Participation}$限制 |              $\textbf{Move the Key to the\_\_}$              |
> > >    | :--------------------------------: | :----------------------------------------------------------: |
> > >    |     $\text{Optional-Optional}$     |        随意将一方的$\text{PK}$移到另一方作$\text{FK}$        |
> > >    |    $\text{Mandatory-Mandatory}$    |        随意将一方的$\text{PK}$移到另一方作$\text{FK}$        |
> > >    |    $\text{Mandatory-Optional}$     | 将$\text{Mandatory}$的$\text{PK}$移动到$\text{Optional}$作$\text{FK}$ |
> > >
> > > 2. 示例
> > >
> > >    - 概念设计
> > >
> > >      <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240523012825726.png" alt="image-20240523012825726" style="zoom: 47%;" /> 
> > >
> > >    - 逻辑设计
> > >
> > >      <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240327063020177.png" alt="image-20240327063020177" style="zoom: 40%;" /> 
> >
> > ### $\textbf{5.2.3. Ternary Relationship}$
> >
> >
> > >    **1️⃣**规则：
> > >
> > >    1. 更具关系创建新实体，关系描述属性成为新实体的属性
> > >    2. 关系中三个实体的$\text{PK}\to{}$新实体中的$\text{PFK}$
> > >
> > >    **2️⃣**$\text{Chen's}$示例
> > >
> > >    <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240320045513507.png" alt="image-20240320045513507" style="zoom:40%;" /> 
> > >
> > >    ```sql
> > >    Contracts   (supplier_id,part_id,department_id) -- three of each are PFKs
> > >    Suppliers   (id,name)                           -- id(PK)
> > >    Parts       (id,name)                           -- id(PK)
> > >    Departments (id,name)                           -- id(PK)
> > >    ```
> > >
> > >    **3️⃣**$\text{Crow's Foot}$​示例
> > >
> > >    1. 概念设计
> > >
> > >       <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240331214447731.png" alt="image-20240331214447731" style="zoom: 67%;" /> 
> > >
> > >
> > >    2. 逻辑设计
> > >
> > >       <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240331214523119.png" alt="image-20240331214523119" style="zoom: 40%;" /> 
> > >
> >
>
> ## $\textbf{5.3. Participation Constraint}$
>
> > **1️⃣**转为逻辑设计时，要指定属性$\text{NULL/NOT NULL}$，以确定是$\text{Optional/Mandatory}$​
> >
> > **2️⃣**示例：$\text{Eevery department MUST have a manager}$
> >
> > <img src="https://raw.githubusercontent.com/DANNHIROAKI/New-Picture-Bed/main/img/image-20240320054202193.png" alt="image-20240320054202193" style="zoom: 77%;" /> 
> >
> > ```sql
> > CREATE TABLE Department (
> >       did INTEGER NOT NULL,
> >       dname CHAR(20) NOT NULL,
> >       budget FLOAT NULL,
> >       ssn CHAR(11) NOT NULL,   -- ssn 表示每一个Department必须有一个Employee
> >       since DATE NULL,
> >       PRIMARY KEY (did),
> >       FOREIGN KEY (ssn) REFERENCES Employee
> >       ON DELETE NO ACTION
> > );
> > ```
> > 
> > :three:$\text{PK}$一定是$\text{NOT NULL}$的
